$(document).ready(function(){function t(t){$.ajax({url:"Assets/Src/Drinks/AffichageDrinks.php",method:"post",data:{page:t},success:function(t){$("#table").html(t)}})}t(),$(document).on("click",".pagination_link",function(){t($(this).attr("id"))}),$("#add_drink").on("click",function(){$("#addmodal").modal("show")}),$("#add_drink_min").on("click",function(){$("#addmodal").modal("show")}),$("select#cat").change(function(t){var e=$(this).children("option:selected").val();$.ajax({method:"post",url:"Assets/Src/Drinks/LoadSubCat.php",data:{cat_id:e}}).done(function(t){t=JSON.parse(t),$("#sous_cat").empty(),t.forEach(function(t){$("#sous_cat").append('<option value="'+t.id+'">'+t.titre+"</option>")})})}),$("#haveAllergene").on("click",function(){$(this).is(":checked")?$("#allergenecontainer").addClass("show"):$("#allergenecontainer").removeClass("show")}),$("#add_drink_form").on("submit",function(t){t.preventDefault(),$.ajax({type:"POST",url:"Assets/Src/Drinks/AddDrinks.php",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$("#footer-action").hide().fadeOut(1e3),$("#load-add").removeClass("hide").fadeIn(1e3)},success:function(t){1==t.status?($("#add_drink_form").trigger("reset"),$("#notif").html(t.notif),$("#addmodal").modal("hide"),$("#nbdrinks").html(t.nbplats),$("#table").html(t.resultat),$("#load-add").addClass("hide").fadeOut(1e3),$("#footer-action").show().fadeIn(1e3)):($("#notif").html(t.notif),$("#load-add").addClass("hide").fadeOut(1e3),$("#footer-action").show().fadeIn(1e3))}})}),$("#resetBtn").on("click",function(){$("#add_plat_form")[0].reset()}),$(document).on("click",".deletebtn",function(){$("#deletemodal").modal("show"),$tr=$(this).closest("tr");let t=$tr.children("td").map(function(){return $(this).text()}).get();$("#delete_id").val(t[0])}),$("#confirmedelete").on("click",function(){$(this).is(":checked")?$("#deletedrink").prop("disabled",!1).removeClass("disabledBtn").addClass("deleteBtn"):$("#deletedrink").prop("disabled",!0).addClass("disabledBtn").removeClass("deleteBtn")}),$("#delete_drink").on("submit",function(t){var e,n,a;t.preventDefault(),e=$("#delete_id").val(),n=$("#confirmedelete").val(),a="id="+e+"&confirmedelete="+n,$.post("Assets/Src/Drinks/DeleteDrinks.php",a,function(t){1==t.status?($("#delete_drink").trigger("reset"),$("#notif").html(t.notif),$("#nbdrinks").html(t.nbplats),$("#deletemodal").modal("hide"),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")}),$(document).on("click",".viewbtn",function(){var t=$(this).attr("id");$.ajax({url:"Assets/Src/Drinks/ViewDrink.php",method:"post",data:{drink_id:t},success:function(t){$("#drink_detail").html(t),$("#viewmodal").modal("show")}})}),$(document).on("click",".est_publie",function(t){$tr=$(this).closest("tr");let e=$tr.children("td").map(function(){return $(this).text()}).get();var n,a=$(this).val();n="id="+e[0]+"&publie="+a,$.post("Assets/Src/Drinks/UpdatePublie.php",n,function(t){1==t.status?($("#notif").html(t.notif),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")}),$(document).on("click",".est_en_avant",function(t){$tr=$(this).closest("tr");let e=$tr.children("td").map(function(){return $(this).text()}).get();var n,a=$(this).val();n="id="+e[0]+"&est_en_avant="+a,$.post("Assets/Src/Drinks/UpdateEnAvant.php",n,function(t){1==t.status?($("#notif").html(t.notif),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")}),$(document).on("click",".editbtn",function(){var t=$(this).attr("id");$.ajax({url:"Assets/Src/Drinks/ModalUpdatedrink.php",method:"post",data:{drink_id:t},dataType:"json",success:function(t){$("#update_modal").html(t),$("#editmodal").modal("show")}})});var e=new FileReader;$(document).on("change","#new_img",function(t){var n;(n=this).files&&n.files[0]&&(e.onload=function(t){$(".img-plat").attr("src",t.target.result),t.target.value},e.readAsDataURL(n.files[0])),t.target.value}),$(document).on("change","#update_cat",function(t){var e=$(this).children("option:selected").val();$.ajax({method:"post",url:"Assets/Src/Drinks/LoadSubCat.php",data:{cat_id:e}}).done(function(t){t=JSON.parse(t),$("#update_souscat").empty(),t.forEach(function(t){$("#update_souscat").append('<option value="'+t.id+'">'+t.titre+"</option>")})})}),$(document).on("change","#update_haveallergene",function(){$(this).is(":checked")?$("#update_allergenecontainer").addClass("show"):$("#update_allergenecontainer").removeClass("show")}),$(document).on("submit","#update_drink",function(t){t.preventDefault(),$.ajax({type:"POST",url:"Assets/Src/Drinks/UpdateDrink.php",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".modal-footer").hide().fadeOut(1e3),$("#load-update").removeClass("hide").fadeIn(1e3)},success:function(t){1==t.status?($("#update_drink").trigger("reset"),$("#notif").html(t.notif),$("#editmodal").modal("hide"),$("#table").html(t.resultat),$("#load-update").addClass("hide").fadeOut(1e3),$(".modal-footer").show().fadeIn(1e3)):($("#notif").html(t.notif),$("#load-update").addClass("hide").fadeOut(1e3),$(".modal-footer").show().fadeIn(1e3))}})})});