$(document).ready(function(){function t(t){$.ajax({url:"Assets/Src/DrinksCategories/AffichageCategories.php",method:"post",data:{page:t},success:function(t){$("#table").html(t)}})}t(),$(document).on("click",".pagination_link",function(){t($(this).attr("id"))}),$("#add_drink").on("click",function(){$("#addmodal").modal("show")}),$("#add_drink_min").on("click",function(){$("#addmodal").modal("show")}),$("#add_cat_form").on("submit",function(t){t.preventDefault(),$.ajax({type:"POST",url:"Assets/Src/DrinksCategories/AddCategories.php",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$("#footer-action").hide().fadeOut(1e3),$("#load-add").removeClass("hide").fadeIn(1e3)},success:function(t){1==t.status?($("#add_cat_form").trigger("reset"),$("#notif").html(t.notif),$("#addmodal").modal("hide"),$("#table").html(t.resultat),$("#load-add").addClass("hide").fadeOut(1e3),$("#footer-action").show().fadeIn(1e3)):($("#notif").html(t.notif),$("#load-add").addClass("hide").fadeOut(1e3),$("#footer-action").show().fadeIn(1e3))}})}),$("#resetBtn").on("click",function(){$("#add_cat_form")[0].reset()}),$(document).on("click",".viewbtn",function(){var t=$(this).attr("id");$.ajax({url:"Assets/Src/DrinksCategories/ViewCategorie.php",method:"post",data:{cat_id:t},success:function(t){$("#cat_detail").html(t),$("#viewmodal").modal("show")}})}),$(document).on("click",".deletebtn",function(){$("#deletemodal").modal("show"),$tr=$(this).closest("tr");let t=$tr.children("td").map(function(){return $(this).text()}).get();$("#delete_id").val(t[1])}),$("#confirmedelete").on("click",function(){$(this).is(":checked")?$("#deletecat").prop("disabled",!1).removeClass("disabledBtn").addClass("deleteBtn"):$("#deletecat").prop("disabled",!0).addClass("disabledBtn").removeClass("deleteBtn")}),$("#delete_cat").on("submit",function(t){var e,a,o;t.preventDefault(),e=$("#delete_id").val(),a=$("#confirmedelete").val(),o="id="+e+"&confirmedelete="+a,$.post("Assets/Src/DrinksCategories/DeleteCategorie.php",o,function(t){1==t.status?($("#delete_cat").trigger("reset"),$("#notif").html(t.notif),$("#deletemodal").modal("hide"),$("#table").html(t.resultat)):($("#notif").html(t.notif),console.log(t.test))},"json")}),$(document).on("click",".editbtn",function(){var t=$(this).attr("id");$.ajax({url:"Assets/Src/DrinksCategories/ModalUpdateCategories.php",method:"post",data:{cat_id:t},success:function(t){$("#update_modal").html(t),$("#editmodal").modal("show")}})});var e=new FileReader;$(document).on("change","#new_img",function(t){var a;(a=this).files&&a.files[0]&&(e.onload=function(t){$(".img-cat").attr("src",t.target.result),t.target.value},e.readAsDataURL(a.files[0])),t.target.value}),$(document).on("submit","#update_cat",function(t){t.preventDefault(),$.ajax({type:"POST",url:"Assets/Src/DrinksCategories/UpdateCategories.php",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".modal-footer").hide().fadeOut(1e3),$("#load-update").removeClass("hide").fadeIn(1e3)},success:function(t){1==t.status?($("#update_cat").trigger("reset"),$("#notif").html(t.notif),$("#editmodal").modal("hide"),$("#table").html(t.resultat),$("#load-update").addClass("hide").fadeOut(1e3),$(".modal-footer").show().fadeIn(1e3)):($("#notif").html(t.notif),$("#load-update").addClass("hide").fadeOut(1e3),$(".modal-footer").show().fadeIn(1e3))}})}),$(document).on("click",".est_publie",function(t){$tr=$(this).closest("tr");let e=$tr.children("td").map(function(){return $(this).text()}).get();var a,o=$(this).val();a="id="+e[1]+"&publie="+o,$.post("Assets/Src/DrinksCategories/UpdatePublie.php",a,function(t){1==t.status?($("#notif").html(t.notif),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")}),$("#table").sortable({items:"tbody > tr",update:function(t,e){parameters=[],$("tbody tr").each(function(){var t=$(this).data("position"),e=$(this).data("id"),a=$(this).index();return item={},item.id=e,item.position=t,item.newPos=++a,parameters.push(item),parameters});var a=JSON.stringify(parameters);$.ajax({url:"Assets/Src/DrinksCategories/UpdatePositionCategories.php",method:"POST",dataType:"JSON",data:{data:a},success:function(t){1==t.status?($("#notif").html(t.notif),$("#table").html(t.resultat)):$("#notif").html(t.notif)}})}})});