$(document).ready(function(){function t(t){$.ajax({url:"Assets/Src/Plats/AffichagePlats.php",method:"post",data:{page:t},success:function(t){$("#table").html(t)}})}t(),$(document).on("click",".pagination_link",function(){t($(this).attr("id"))}),$("#add_plat").on("click",function(){$("#addmodal").modal("show")}),$("#add_plat_min").on("click",function(){$("#addmodal").modal("show")}),$("select#cat").change(function(t){var e=$(this).children("option:selected").val();$.ajax({method:"post",url:"Assets/Src/Plats/LoadSubCat.php",data:{cat_id:e}}).done(function(t){t=JSON.parse(t),$("#sous_cat").empty(),t.forEach(function(t){$("#sous_cat").append('<option value="'+t.id+'">'+t.titre+"</option>")})})}),$("#est_epice").on("click",function(){$(this).is(":checked")?$("#epicelevelcontainer").addClass("show"):$("#epicelevelcontainer").removeClass("show")}),$("#haveAllergene").on("click",function(){$(this).is(":checked")?$("#allergenecontainer").addClass("show"):$("#allergenecontainer").removeClass("show")}),$("#add_plat_form").on("submit",function(t){t.preventDefault(),$.ajax({type:"POST",url:"Assets/Src/Plats/AddPlats.php",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$("#footer-action").hide().fadeOut(1e3),$("#load-add").removeClass("hide").fadeIn(1e3)},success:function(t){1==t.status?($("#add_plat_form").trigger("reset"),$("#notif").html(t.notif),$("#addmodal").modal("hide"),$("#nbplats").html(t.nbplats),$("#table").html(t.resultat),$("#load-add").addClass("hide").fadeOut(1e3),$("#footer-action").show().fadeIn(1e3)):($("#notif").html(t.notif),$("#load-add").addClass("hide").fadeOut(1e3),$("#footer-action").show().fadeIn(1e3),console.log(t.test))}})}),$("#resetBtn").on("click",function(){$("#add_plat_form")[0].reset()}),$(document).on("click",".deletebtn",function(){$("#deletemodal").modal("show"),$tr=$(this).closest("tr");let t=$tr.children("td").map(function(){return $(this).text()}).get();$("#delete_id").val(t[0])}),$("#confirmedelete").on("click",function(){$(this).is(":checked")?$("#deleteplat").prop("disabled",!1).removeClass("disabledBtn").addClass("deleteBtn"):$("#deleteplat").prop("disabled",!0).addClass("disabledBtn").removeClass("deleteBtn")}),$("#delete_plat").on("submit",function(t){var e,a,n;t.preventDefault(),e=$("#delete_id").val(),a=$("#confirmedelete").val(),n="id="+e+"&confirmedelete="+a,$.post("Assets/Src/Plats/DeletePlats.php",n,function(t){1==t.status?($("#delete_plat").trigger("reset"),$("#notif").html(t.notif),$("#nbplats").html(t.nbplats),$("#deletemodal").modal("hide"),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")}),$(document).on("click",".viewbtn",function(){var t=$(this).attr("id");$.ajax({url:"Assets/Src/Plats/ViewPlats.php",method:"post",data:{plat_id:t},success:function(t){$("#plat_detail").html(t),$("#viewmodal").modal("show")}})}),$(document).on("click",".editbtn",function(){var t=$(this).attr("id");$.ajax({url:"Assets/Src/Plats/ModalUpdatePlat.php",method:"post",data:{plat_id:t},dataType:"json",success:function(t){$("#update_modal").html(t),$("#editmodal").modal("show")}})});var e=new FileReader;$(document).on("change","#new_img",function(t){var a;(a=this).files&&a.files[0]&&(e.onload=function(t){$(".img-plat").attr("src",t.target.result),t.target.value},e.readAsDataURL(a.files[0])),t.target.value}),$(document).on("change","#update_cat",function(t){var e=$(this).children("option:selected").val();$.ajax({method:"post",url:"Assets/Src/Plats/LoadSubCat.php",data:{cat_id:e}}).done(function(t){t=JSON.parse(t),$("#update_souscat").empty(),t.forEach(function(t){$("#update_souscat").append('<option value="'+t.id+'">'+t.titre+"</option>")})})}),$(document).on("change","#update_est_epice",function(){$(this).is(":checked")?$("#update_epicelevelcontainer").addClass("show"):($("input[name=updateepicelevel]").attr("checked",!1),$("#update_epicelevelcontainer").removeClass("show"))}),$(document).on("change","#update_haveallergene",function(){$(this).is(":checked")?$("#update_allergenecontainer").addClass("show"):$("#update_allergenecontainer").removeClass("show")}),$(document).on("submit","#update_plat",function(t){t.preventDefault(),$.ajax({type:"POST",url:"Assets/Src/Plats/UpdatePlat.php",data:new FormData(this),dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".modal-footer").hide().fadeOut(1e3),$("#load-update").removeClass("hide").fadeIn(1e3)},success:function(t){1==t.status?($("#update_plat").trigger("reset"),$("#notif").html(t.notif),$("#editmodal").modal("hide"),$("#table").html(t.resultat),$("#load-update").addClass("hide").fadeOut(1e3),$(".modal-footer").show().fadeIn(1e3)):($("#notif").html(t.notif),$("#load-update").addClass("hide").fadeOut(1e3),$(".modal-footer").show().fadeIn(1e3))}})}),$(document).on("click",".est_publie",function(t){$tr=$(this).closest("tr");let e=$tr.children("td").map(function(){return $(this).text()}).get();var a,n=$(this).val();a="id="+e[0]+"&publie="+n,$.post("Assets/Src/Plats/UpdatePublie.php",a,function(t){1==t.status?($("#notif").html(t.notif),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")}),$(document).on("click",".est_en_avant",function(t){$tr=$(this).closest("tr");let e=$tr.children("td").map(function(){return $(this).text()}).get();var a,n=$(this).val();a="id="+e[0]+"&est_en_avant="+n,$.post("Assets/Src/Plats/UpdateEnAvant.php",a,function(t){1==t.status?($("#notif").html(t.notif),$("#table").html(t.resultat)):$("#notif").html(t.notif)},"json")})});